"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[4653],{72863:(e,t,a)=>{a.r(t),a.d(t,{ReadingHistoryModal:()=>L,default:()=>j});var n=a(44194),o=a(49110),r=a(8918),l=a(85121),i=a(364),s=a(99128),c=n.createElement;function u(e){var t=e.onArticleClick,a=e.data,n=e.canFetchMore,o=e.isFetchingNextPage,u=e.fetchNextPage;return c(r.Z,{canFetchMore:n,fetchNextPage:u,isFetchingNextPage:o},null==a?void 0:a.map((function(e){return c("button",{key:"".concat(e.post.id,"-").concat(e.timestamp),type:"button",className:"group relative -mx-6 cursor-pointer hover:bg-surface-hover",onClick:function(a){return t(a,e)},"aria-label":"Reading history item"},c(l.Z,{postItem:e,showButtons:!1,clickable:!1}),c(i.e0,{size:s.Jh.Medium,className:"absolute right-3 top-1/2 hidden -translate-y-1/2 rotate-90 group-hover:flex"}))})))}var d=a(14960),f=a(38437),p=a(28076),m=a(91049),g=a(8421),v=a(74690);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,p.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const y=function(e){var t,a=e.key,o=e.query,r=e.variables,l=(0,m.N)(a,(function(e){var t=e.pageParam;return g.Nb.request(o,x(x({},r),{},{after:t}))}),{getNextPageParam:function(e){var t,a;return(null==e||null===(t=e.readHistory)||void 0===t?void 0:t.pageInfo.hasNextPage)&&(null==e||null===(a=e.readHistory)||void 0===a?void 0:a.pageInfo.endCursor)}}),i=l.isLoading,s=l.isFetchingNextPage,c=l.hasNextPage,u=l.data,d=l.fetchNextPage,f=!i&&!s&&c&&u.pages.length>0,p=(0,v.Z)({fetchPage:d,canFetchMore:f}),h=null==u||null===(t=u.pages)||void 0===t?void 0:t.some((function(e){return e.readHistory.edges.length>0}));return(0,n.useMemo)((function(){return{queryResult:l,hasData:h,isLoading:i,data:u,isInitialLoading:!h&&i,infiniteScrollRef:p}}),[h,l,i,u,p])};var b=function(){var e=(0,n.useContext)(d.ZP).user,t={key:["readHistory",null==e?void 0:e.id],query:f.dC,variables:{isPublic:!0}},a=y(t),o=a.hasData,l=a.data,i=a.isInitialLoading,s=a.isLoading,c=a.queryResult;return{data:(0,n.useMemo)((function(){return null==l?void 0:l.pages.map((function(e){return e.readHistory.edges.map((function(e){return e.node}))})).flat()}),[l]),hasData:o,isInitialLoading:i,isLoading:s,queryResult:c,canFetchMore:(0,r.H)(c),fetchNextPage:c.fetchNextPage,isFetchingNextPage:c.isFetchingNextPage}},N=a(58519),P=a(45557),w=(0,N.Z)("h1","text-center typo-large-title font-bold"),k=((0,N.Z)("p","text-center typo-title3 text-text-tertiary"),(0,N.Z)("span","text-brand-default")),S=((0,N.Z)(P.AC,"!p-0 laptop:min-h-page h-full !max-w-[42.5rem] !w-full",P.u7),(0,N.Z)("div","flex flex-1 flex-col"),n.createElement);function C(e){var t=e.hasNoData;return S(n.Fragment,null,S(w,{className:"hidden tablet:block"},t?"Read":"Share"," ",S(k,null,"a post")),S("p",{className:"py-4 text-center"},t?"Your reading history is empty! Please read at least one post by clicking on a post to start sharing with your Squad.":"Pick a post that you would like to discuss with your Squad members."))}var O=a(62130),D=n.createElement,F=(0,N.Z)(O.f,"h-3 rounded-12");const q=function(e){var t=e.amount;return D("div",{className:"flex flex-col"},Array(void 0===t?7:t).fill(0).map((function(e,t){return D("div",{key:t,className:"flex flex-row items-center px-8 py-3"},D(O.f,{className:"h-16 w-16 rounded-16 laptop:w-24"}),D("div",{className:"ml-4 flex flex-1 flex-col"},D(F,{className:"w-full laptop:w-1/2"}),D(F,{className:"mt-2 w-2/3 laptop:w-1/3"})))})))};var Z=a(36491),z=n.createElement;function L(e){var t=e.keepOpenAfterSelecting,a=e.onArticleSelected,n=e.onRequestClose,r=b(),l=r.hasData,i=r.isInitialLoading,s=r.data,c=r.isLoading,d=r.canFetchMore,f=r.fetchNextPage,p=r.isFetchingNextPage,m=!l&&!i,g=m?"Read":"Share";return z(o.u_,{isOpen:!0,onRequestClose:n,kind:o.u_.Kind.FixedCenter,size:o.u_.Size.Small},z(o.u_.Header,{className:"flex tablet:hidden",kind:Z.Li.Primary,title:"".concat(g," a post")}),z(o.u_.Body,null,z(C,{hasNoData:m}),z(u,{onArticleClick:function(e,o){a(o),t||n(e)},data:s,canFetchMore:d,fetchNextPage:f,isFetchingNextPage:p}),c&&z(q,{amount:i?15:1})))}const j=L},85121:(e,t,a)=>{a.d(t,{Z:()=>Z});var n=a(44194),o=a(83849),r=a.n(o),l=a(52402),i=a.n(l),s=a(45794),c=a(1057),u=a(70944),d=a(16186),f=a(12122),p=a(58519),m=a(45405),g=a(54480),v=a(94789),h=a(44678),x=a(83235),y=a(42135),b=a(14960),N=a(84663),P=a(5041),w=a(59036),k=function(){var e=(0,y.NL)(),t=(0,n.useContext)(b.ZP).user;return(0,P.U)({variables:{key:N.dt.ReadingHistory},onMutate:function(a){var n=a.id,o=a.vote,r=e.getQueryData((0,N.e0)(N.dt.ReadingHistory,t));return(0,w.i)({id:n,vote:o,data:r,user:t,queryClient:e})}})},S=a(16789),C=a(84187),O=a(40701),D=a(30413),F=n.createElement,q=(0,p.Z)("div","absolute left-5 -my-1 w-8 h-8 rounded-full bg-background-default");function Z(e){var t,a,o,l,p,y=e.postItem,b=e.showButtons,N=void 0===b||b,P=e.clickable,w=void 0===P||P,Z=e.onHide,z=e.className,L=e.onContextMenu,j=e.showVoteActions,E=void 0!==j&&j,M=e.logOrigin,R=void 0===M?S.aP.Feed:M,H=y.timestampDb,I=y.post,A=null!==(t=null==I?void 0:I.sharedPost)&&void 0!==t?t:I,T=k(),U=T.toggleUpvote,_=T.toggleDownvote,W=r()("relative flex w-full flex-row py-3 pl-9 pr-5",E?"items-start tablet:items-center":"items-center",w&&"hover:cursor-pointer hover:bg-surface-hover",z);return F("article",{className:r()(!w&&W)},F(h.Z,{condition:w,wrapper:function(e){return F(i(),{href:I.commentsPermalink},F("a",{className:W,title:"Go to post"},e))}},F(n.Fragment,null,F(v.E,{src:A.image,alt:I.title,className:"h-16 w-16 rounded-16 object-cover laptop:w-24",loading:"lazy",fallbackSrc:x.n.post.imageCoverPlaceholder}),F(q,{className:E&&"top-8"}),F(g.YY,{size:g.$C.Small,rounded:"full",className:r()("absolute left-6",E&&"top-8"),user:{image:I.source.image,username:"source of ".concat(I.title)},nativeLazyLoading:!0}),F("div",{className:r()("flex flex-1",E?"flex-col tablet:flex-row":"items-center")},F("div",{className:"ml-4 flex flex-1 flex-col"},F("h3",{className:"mr-6 line-clamp-2 flex flex-1 break-words text-left typo-callout"},I.title),F(m.Z,{readTime:I.readTime,numUpvotes:I.numUpvotes,isVideoType:(0,s.AD)(I)})),F("div",{className:"ml-4 mt-1 flex tablet:ml-0 tablet:mt-1"},N&&E&&F(n.Fragment,null,F(C.zx,{size:O.qE.Small,variant:O.Wu.Tertiary,color:E?D.S.Avocado:void 0,className:E?"flex":"hidden laptop:flex",pressed:(null==I||null===(a=I.userState)||void 0===a?void 0:a.vote)===s.hn.Up,onClick:function(e){e.preventDefault(),U({payload:I,origin:R})},icon:F(c.o,{secondary:(null==I||null===(o=I.userState)||void 0===o?void 0:o.vote)===s.hn.Up})}),F(C.zx,{size:O.qE.Small,variant:O.Wu.Tertiary,color:E?D.S.Ketchup:void 0,className:E?"flex":"hidden laptop:flex",pressed:(null==I||null===(l=I.userState)||void 0===l?void 0:l.vote)===s.hn.Down,onClick:function(e){e.preventDefault(),_({payload:I,origin:R})},icon:F(u.I,{secondary:(null==I||null===(p=I.userState)||void 0===p?void 0:p.vote)===s.hn.Down})})),N&&!E&&Z&&F(C.zx,{size:O.qE.Small,variant:O.Wu.Tertiary,className:"hidden laptop:flex",icon:F(d.q,null),onClick:function(e){e.stopPropagation(),e.preventDefault(),Z({postId:I.id,timestamp:H})}}),N&&F(C.zx,{variant:O.Wu.Tertiary,"data-testid":"post-item-".concat(I.id),icon:F(f.O,null),onClick:function(e){e.stopPropagation(),e.preventDefault(),L(e,y)},size:O.qE.Small}))))))}}}]);