"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7774],{35782:(e,t,r)=>{r.r(t),r.d(t,{default:()=>se});var n=r(51911),a=r(28076),o=r(93309),s=r(70468),u=r(62699),l=r.n(u),i=r(44194),c=r(86422),f=r(78487),d=r(83849),m=r.n(d),p=r(84187),b=r(40701),g=r(57486),v=r(87564),y=r(38722),h=r(53767),w=["signal"];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.signal,o=(0,h.Z)(r,w),s=new AbortController,u=fetch(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({signal:s.signal},o));n&&n.addEventListener("abort",(function(){return s.abort()}));var l=setTimeout((function(){return s.abort()}),t);return u.finally((function(){return clearTimeout(l)}))}var P,O,k,N=r(84153),j=r(66022),Z=r(91385),E=(0,Z.gql)(P||(P=(0,j.Z)(["\n  query SourceByFeed($feed: String!) {\n    source: sourceByFeed(feed: $feed) {\n      id\n      name\n      image\n    }\n  }\n"]))),C=(0,Z.gql)(O||(O=(0,j.Z)(["\n  mutation RequestSource($data: RequestSourceInput!) {\n    requestSource(data: $data) {\n      id\n    }\n  }\n"]))),q=(0,Z.gql)(k||(k=(0,j.Z)(["\n  query SourceRequestAvailability {\n    sourceRequestAvailability {\n      hasAccess\n    }\n  }\n"]))),_=r(14960),R=r(31329),z=r(49110),D=r(83235),A=r(45557),L=r(16789),F=r(81931),I=r(36491),T=i.createElement,M=function(){return(0,I.vR)().isDrawer?T("img",{src:D.n.notifications.big,alt:"A sample browser notification"}):null},B=function(){return(0,I.vR)().isDrawer?null:T("img",{className:"mx-auto my-14",src:D.n.notifications.big,alt:"A sample browser notification"})};const W=function(e){var t=e.onRequestClose,r=(0,F.iX)({onPopupGranted:function(){return t(null)}}).onEnablePush,a=function(){var e=(0,o.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(L.Yq.NewSourceModal);case 2:e.sent&&(null==t||t(null));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return T(z.u_,(0,n.Z)({},e,{kind:z.u_.Kind.FlexibleTop,size:z.u_.Size.Medium,isDrawerOnMobile:!0,drawerProps:{className:{drawer:"pb-4",close:"mx-4"}}}),T(z.u_.Header,null),T(M,null),T(z.u_.Body,{className:"gap-2 px-4 pb-0 pt-3"},T(z.u_.Title,{className:"!typo-large-title tablet:typo-title1"},"Enable Push Notifications"),T(z.u_.Text,{className:m()("text-center typo-body tablet:typo-callout")},"Get notified of the status of your source submissions"),T(B,null)),T(p.zx,{variant:b.Wu.Primary,onClick:a,className:"m-4 mb-0 mt-5 flex tablet:hidden"},"Enable notifications"),T(z.u_.Footer,{justify:A.WD.Center},T(p.zx,{variant:b.Wu.Primary,onClick:a},"Enable notifications")))};var H=r(3339),Y=r(17802),K=r(9947),$=r(2041),J=r(68353),U=r(68425),G=r(40484),V=r(76553),X=r(32298),Q=r(92429),ee=r(84663),te=r(54480),re=r(8421),ne=i.createElement;function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var oe=function(e,t){return ne("span",{className:"flex w-full flex-1 items-center justify-between"},e,ne(p.zx,{variant:b.Wu.Tertiary,tag:"a",target:"_blank",href:t,icon:ne($.h,null)}))};function se(e){var t=(0,i.useRef)(),r=(0,i.useState)(!1),u=r[0],d=r[1],h=(0,i.useState)(),w=h[0],x=h[1],P=(0,i.useState)(!1),O=P[0],k=P[1],j=(0,i.useState)(!1),Z=j[0],D=j[1],A=(0,V.KB)().isPushSupported,L=(0,F.iX)().hasPermissionCache,I=(0,i.useState)(),T=I[0],M=I[1],B=(0,i.useState)(),$=B[0],se=B[1],ue=(0,i.useState)(),le=ue[0],ie=ue[1],ce=(0,i.useContext)(_.ZP),fe=ce.user,de=ce.isLoggedIn,me=ce.loginState,pe=ce.showLogin,be=R.IP.SubmitNewSource,ge=e.onRequestClose,ve=(0,H.Z)(G.N,!1),ye=(0,s.Z)(ve,2),he=ye[0],we=ye[1],xe=(0,c.a)([ee.dt.SourceRequestAvailability,null==fe?void 0:fe.id],(0,o.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.Nb.request(q);case 2:return t=e.sent,e.abrupt("return",t.sourceRequestAvailability);case 4:case"end":return e.stop()}}),e)})))),Se=xe.data,Pe=xe.isLoading,Oe=function(){k(!0),x("Failed to fetch information, try to find the link to the RSS itself and try again.")},ke=(0,f.D)((function(e){return re.Nb.request(E,{feed:e})})),Ne=ke.mutateAsync,je=ke.isLoading,Ze=(0,f.D)(function(){var e=(0,o.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("".concat(y.JW,"/scrape/source?url=").concat(t),2e4,{credentials:"same-origin"});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){x(null),k(!1),M(null),se(null),ie(null)},onSuccess:function(e){return"website"!==e.type?Oe():e.rss.length?M(e.rss.map((function(e){return{label:oe(e.title,e.url),value:e.url}}))):x("Could not find RSS feed")},onError:Oe}),Ee=Ze.mutateAsync,Ce=Ze.isLoading,qe=(0,f.D)((function(e){return re.Nb.request(C,{data:{sourceUrl:e}})}),{onSuccess:function(){L||!A||he?null==ge||ge(null):D(!0)}}),_e=qe.mutateAsync,Re=qe.isLoading,ze=function(){var e=(0,o.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),fe){e.next=4;break}return pe({trigger:be}),e.abrupt("return");case 4:return r=(0,v.x)(t.currentTarget),e.next=7,Ee(r.url);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=(0,o.Z)(l().mark((function e(t){var r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!le){e.next=3;break}return e.abrupt("return");case 3:return r=(0,v.x)(t.currentTarget),e.next=6,Ne(r.rss);case 6:if(!(n=e.sent).source){e.next=11;break}ie(n.source),e.next=13;break;case 11:return e.next=13,_e(r.rss);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,o.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(!0);case 2:ge(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({onRequestClose:Ae},e);if(Pe)return null;var Fe=de&&Se.hasAccess;if(Z)return ne(W,Le);var Ie=!(null==T||!T.length);return ne(z.u_,(0,n.Z)({},Le,{formProps:{title:"Suggest new source",form:Ie?"select-feed":"submit-source",copy:{right:Ie?"Submit for review":"Check link"},rightButtonProps:{disabled:Ie?!$||!!le:!u||!Fe,loading:Ie?je||Re:Ce}}}),ne(z.u_.Header,{title:"Suggest new source"}),ne(z.u_.Body,null,ne(z.u_.Text,null,"Have an idea for a new source? Insert its link below to add it to the feed."),ne("a",{className:"mb-2 font-bold text-text-link underline typo-callout",target:"_blank",rel:"noopener",href:N.L5},"Content guidelines"),ne("form",{className:"flex w-full flex-col",ref:t,onSubmit:ze,"aria-busy":Ce,"data-testid":"login state: ".concat(null==me?void 0:me.trigger),id:"submit-source"},ne(X.n,{disabled:!Fe||!(null==T||!T.length),className:{container:"mt-4"},inputId:"new-source-field",name:"url",label:"Paste blog / RSS URL",placeholder:"Paste blog / RSS URL",autoComplete:"off",type:"url",autoFocus:!0,"aria-describedby":w&&"new-source-field-desc",valueChanged:function(){t.current&&d(t.current.checkValidity())},fieldType:"primary",leftIcon:ne(J.x,null),rightIcon:Fe?void 0:ne(U.m,{className:"text-text-disabled"})})),Fe&&le&&ne(Y.ZP,{className:"mt-4",type:Y.NK.Error,title:ne(i.Fragment,null,le.name," already exist"," ",ne(K.Z,{className:"ml-auto",source:le,size:te.$C.Small}))}),!Fe&&ne(Q.C,{className:"mt-4"}),Fe&&ne(i.Fragment,null,!(null==T||!T.length)&&!le&&ne(i.Fragment,null,ne("div",{className:"mb-6 self-start text-text-tertiary typo-callout"},T.length," RSS feed",T.length>1?"s":""," found"),ne("form",{className:"flex w-full flex-col items-center",id:"select-feed",onSubmit:De},ne(g.Y,{name:"rss",options:T,onChange:se,value:$,className:{container:"w-full self-start",content:"w-full pr-0"}}))),!le&&w&&!(null!=T&&T.length)&&ne(i.Fragment,null,ne("div",{id:"new-source-field-desc",className:m()("self-start text-status-error typo-callout",!O&&"mb-6")},w),O&&ne(p.zx,{tag:"a",className:"mb-6 mt-3 self-start",variant:b.Wu.Secondary,size:b.qE.Small,href:"mailto:hi@daily.dev?subject=Failed to add new source",target:"_blank",rel:"noopener noreferrer"},"Contact")))),Fe&&ne(z.u_.Footer,null,!(null!=T&&T.length)&&ne(p.zx,{form:"submit-source",variant:b.Wu.Primary,type:"submit",disabled:Ce||!u,loading:Ce},"Check link"),!(null==T||!T.length)&&ne(i.Fragment,null,ne(p.zx,{className:"mr-auto",disabled:je||Re,onClick:function(){M([])}},"Back"),ne(p.zx,{form:"select-feed",variant:b.Wu.Primary,type:"submit",disabled:!$||!!le,loading:je||Re},"Submit for review"))))}},92429:(e,t,r)=>{r.d(t,{C:()=>c});var n=r(51911),a=r(44194),o=r(52402),s=r.n(o),u=r(17802),l=r(84153),i=a.createElement,c=function(e){return i(u.ZP,(0,n.Z)({},e,{type:u.NK.Error,title:i("div",{className:"block flex-1","data-testid":"reputationAlert"},"You do not have enough reputation to use this feature yet. However, you can"," ",i(s(),{href:"".concat(l.uJ,"squads/new")},i("a",{className:"font-bold underline"},"create a Squad"))," ","instead where you can share your favorite content , invite your friends and colleagues and a lot more!")}))}},9947:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(51911),a=r(53767),o=r(44194),s=r(44678),u=r(54480),l=r(78231),i=r(83235),c=r(22925),f=["source","rounded","isLink"],d=o.createElement;const m=function(e){var t=e.source,r=e.rounded,o=void 0===r?"full":r,m=e.isLink,p=(0,a.Z)(e,f),b=(0,c.Y)().isCompanion;return d(s.Z,{condition:!!m,wrapper:function(e){return d(l.x,{href:t.permalink},e)}},d(u.YY,(0,n.Z)({},p,{rounded:o,user:{id:t.id,image:t.image,username:t.handle},fallbackSrc:i.n.squads.imageFallback,nativeLazyLoading:b})))}},17802:(e,t,r)=>{r.d(t,{oM:()=>x,NK:()=>d,ZP:()=>S});var n,a,o=r(44194),s=r(83849),u=r.n(s),l=r(51911),i=r(99128);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}const f=function(e){return o.createElement("svg",c({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),n||(n=o.createElement("defs",null,o.createElement("clipPath",{id:"outlined_svg__a"},o.createElement("path",{fill:"currentcolor",d:"M11.541.514a4 4 0 011.4 1.317l.126.209 5.58 9.92a4 4 0 01-3.23 5.953l-.256.008H4a4 4 0 01-3.605-5.733l.119-.228 5.58-9.92A4 4 0 0111.541.514zM7.92 2.887l-.082.133-5.58 9.92a2 2 0 001.594 2.976L4 15.92h11.16a2 2 0 001.815-2.841l-.071-.14-5.58-9.92a2 2 0 00-3.405-.133zM9.58 11.92a1 1 0 110 2 1 1 0 010-2zm0-7a1 1 0 011 1v4a1 1 0 11-2 0v-4a1 1 0 011-1z"})))),a||(a=o.createElement("g",{clipPath:"url(#outlined_svg__a)",fill:"currentcolor",transform:"translate(2.42 3.079)"},o.createElement("path",{d:"M0 0h19.161v17.921H0V0z"}))))};var d,m=o.createElement,p=r(6839),b=r(74077),g=r(58519),v=o.createElement;!function(e){e.Info="info",e.Error="error",e.Success="success"}(d||(d={}));var y={info:"text-accent-bun-default",error:"text-status-error",success:"text-status-success"},h={info:"border-l-accent-bun-default",error:"border-l-status-error",success:"border-l-status-success"},w={info:p.A,error:function(e){return m(i.ZP,(0,l.Z)({},e,{IconPrimary:f,IconSecondary:f}))},success:b.t},x=(0,g.Z)("p","typo-callout mt-3");const S=function(e){var t=e.className,r=e.title,n=e.children,a=e.type,o=void 0===a?d.Info:a,s=e.flexDirection,l=void 0===s?"flex-col":s,c=w[o];return v("div",{className:u()("flex border border-l-4 border-theme-active p-3",l,h[o],n?"rounded-16":"rounded-12",t)},v("span",{className:"flex flex-row items-center"},v(c,{size:i.Jh.Small,className:u()("mr-2",y[o])}),v("span",{className:u()("flex flex-1 typo-callout",n&&"font-bold",n&&y[o])},r)),n)}}}]);