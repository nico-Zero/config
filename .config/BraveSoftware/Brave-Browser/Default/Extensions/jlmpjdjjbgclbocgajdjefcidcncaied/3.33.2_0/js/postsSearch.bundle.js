"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[7530],{24281:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var r=t(70468),o=t(93309),a=t(62699),u=t.n(a),l=t(44194),i=t(77005),s=t.n(i),c=t(86422),d=t(83849),f=t.n(d),p=t(7817);var m=t(3376),v=t(25989),h=t(93077),y=t(38437),g=t(8421),b=l.createElement,k=s()((function(){return t.e(6720).then(t.bind(t,99906))}),{ssr:!1,loadableGenerated:{webpack:function(){return[99906]}}}),x={searchPostSuggestions:v.YX,searchBookmarksSuggestions:h.gr,searchReadingHistorySuggestions:y.nr};function C(e){var n=e.initialQuery,t=e.autoFocus,a=void 0===t||t,i=e.placeholder,s=e.onSubmitQuery,d=e.className,h=e.suggestionType,y=void 0===h?"searchPostSuggestions":h,C=e.onFocus,I=(0,l.useRef)(),S=(0,l.useState)(),w=S[0],F=S[1],N=(0,l.useState)(),q=N[0],B=N[1],z=(0,l.useState)(null),E=z[0],P=z[1],Z=(0,l.useState)([]),R=Z[0],T=Z[1],D=x[y],O=(0,c.a)([y,q],(function(){return g.Nb.request(D,{query:q})}),{enabled:!!q}),W=O.data,K=O.isLoading;(0,l.useEffect)((function(){w||F(n)}),[n]);var X=function(){return P(null)},Q=function(){if(!E){var e=I.current.getBoundingClientRect(),n=e.left,t=e.bottom,r=e.width;P({x:n,y:t+window.scrollY,width:r})}};(0,l.useEffect)((function(){var e,n,t;K||(null!=R&&R.length||null==W||null===(e=W[y])||void 0===e||!e.hits.length||Q(),T(null!==(n=null==W||null===(t=W[y])||void 0===t?void 0:t.hits.map((function(e){return e.title})))&&void 0!==n?n:[]))}),[W,K]);var U=function(){var e=(0,o.Z)(u().mark((function e(n){var t,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==n||null===(t=n.replace)||void 0===t?void 0:t.call(n,v.F4,""),e.next=3,s(r||q);case 3:r&&F(r),X();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Y=function(e,n){var t=(0,l.useState)(-1),r=t[0],o=t[1];return(0,l.useEffect)((function(){o(-1)}),[e]),{selectedItemIndex:r,onKeyDown:function(t){if(40===t.keyCode||38===t.keyCode){t.preventDefault();var a=e.length+1;if(r>-1){var u=40===t.keyCode?1:-1;o(((r+u)%a+a)%a)}else o(40===t.keyCode?0:a-1)}else 13===t.keyCode&&n(r>-1&&e[r])}}}(R,U),G=Y.selectedItemIndex,H=Y.onKeyDown,L=(0,m.Z)((function(e){return B(e)}),100),_=(0,r.Z)(L,1)[0];(0,l.useEffect)((function(){var e;a&&(null===(e=I.current)||void 0===e||e.querySelector("input").focus())}),[I,a]);var j=!!E&&!!R.length;return b(l.Fragment,null,b(p.U,{className:f()("compact flex-1",d),inputId:"posts-search",fieldSize:"medium",placeholder:null!=i?i:"Find posts",ref:I,value:w,valueChanged:function(e){if(!e.length)return X(),void B("");e&&e!==n&&_(e),null===E&&Q()},onKeyDown:H,onBlur:function(){null!=q&&q.length&&X()},onFocus:function(e){null==C||C(e),null!=R&&R.length&&Q()},"aria-haspopup":"true","aria-expanded":j}),b(k,{placement:E,items:R,focusedItemIndex:G,onItemClick:U,isOpen:j}))}},7817:(e,n,t)=>{t.d(n,{U:()=>b});var r=t(51911),o=t(53767),a=t(44194),u=t(83849),l=t.n(u),i=t(47597),s=t(68983),c=t(16186),d=t(364),f=t(30386),p=t(84187),m=t(40701),v=t(81139),h=["inputId","name","value","valueChanged","placeholder","fieldSize","readOnly","fieldType","className","autoFocus","type","disabled","rightButtonProps","aria-describedby","onBlur","onFocus","showIcon"],y=a.createElement,g=function(e){return e.isPrimary?y(c.q,null):y(d.e0,{className:"rotate-90"})},b=(0,a.forwardRef)((function(e,n){var t=e.inputId,a=e.name,u=e.value,d=e.valueChanged,b=e.placeholder,k=void 0===b?"Search":b,x=e.fieldSize,C=void 0===x?"large":x,I=e.readOnly,S=e.fieldType,w=void 0===S?"primary":S,F=e.className,N=e.autoFocus,q=e.type,B=e.disabled,z=e.rightButtonProps,E=void 0===z?{type:"button"}:z,P=e["aria-describedby"],Z=e.onBlur,R=e.onFocus,T=e.showIcon,D=void 0===T||T,O=(0,o.Z)(e,h),W=(0,i.i)(u,d),K=W.inputRef,X=W.focused,Q=W.hasInput,U=W.onFocus,Y=W.onBlur,G=W.onInput,H=W.focusInput,L=W.setInput,_=function(e){e.stopPropagation(),L(null)},j="primary"===w,A="secondary"===w,J="medium"===C?"h-10 rounded-12":"h-12 rounded-14";return y(s.n,(0,r.Z)({},O,{className:l()("items-center !border !border-border-subtlest-tertiary !bg-background-default",J,F,{focused:X}),onClick:H,"data-testid":"searchField",ref:n}),!!D&&(A&&Q?y(p.zx,{className:"mr-2",size:m.qE.XSmall,variant:m.Wu.Tertiary,title:"Clear query",onClick:_,icon:y(c.q,{className:"icon text-lg group-hover:text-text-primary"}),disabled:!Q}):y(f.W,{secondary:X,className:"icon mr-2 text-2xl",style:{color:X||Q?"var(--theme-text-primary)":"var(--field-placeholder-color)"}})),y(s._,{disabled:B,placeholder:k,name:a,id:t,ref:K,onFocus:function(e){U(),null==R||R(e)},onBlur:function(e){Y(),null==Z||Z(e)},onInput:G,autoFocus:N,type:q,"aria-describedby":P,autoComplete:"off",className:l()("flex-1",J,(0,v.rI)({readOnly:I,disabled:B,hasInput:Q,focused:X})),required:!0}),(Q&&j||A)&&!!E&&y(p.zx,(0,r.Z)({},E,{variant:A?m.Wu.Primary:m.Wu.Tertiary,size:E.size||m.qE.XSmall,title:E.title||"Clear query",onClick:"submit"!==E.type?_:E.onClick,icon:y(g,{isPrimary:j}),disabled:(null==E?void 0:E.disabled)||!Q})))}))}}]);