"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2992],{15188:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ze});var n=o(51911),a=o(53767),s=o(44194),i=o(49110),l=o(20639),r=o(16789),c=o(7175),u=o(86030),p=o(51529),d=o(45794),f=o(28076),m=o(83849),g=o.n(m),v=o(52402),P=o.n(v),b=o(30197),x=o(97343),N=o(47932),y=o(63593),h=o(3570),C=o(83235),O=o(52712),w=o(93835),k=o(4e4),j=o(45557),Z=o(62090),E=o(47307),A=o(58519),R=o(37981),S=o(51292),D=["post","onClose","inlineActions","className","notificationClassName","contextMenuId","onRemovePost"],I=s.createElement,L=(0,A.Z)("div","flex flex-row items-center"),q=function(e){var t=e.post,o=e.onClose,s=e.inlineActions,i=e.className,l=(e.notificationClassName,e.contextMenuId),c=e.onRemovePost,u=(0,a.Z)(e,D);return I(L,(0,n.Z)({},u,{className:g()("gap-2",i)}),I(S.E,{post:t}),I(R.b,{post:t,onClose:o,inlineActions:s,contextMenuId:l,onRemovePost:c,origin:r.aP.CollectionModal}))},T=o(15080),z=o(53679),F=o(62567),M=o(40701),W=s.createElement,Q=function(e){var t=e.className,o=(0,z.o)(),n=o.checkHasCompleted,a=o.completeAction;return!o.isActionsFetched||n(F.Us.CollectionsIntro)?null:W("span",{className:g()("relative flex w-full flex-row rounded-10 border border-accent-cabbage-default p-3 pr-2",t)},W("div",{className:"flex flex-1 flex-col typo-subhead"},W("strong",null,"Introducing collections!"),W("p",{className:"mt-2"},"Collections are posts that aggregate all the information about specific news to help you save time and discuss with the community.")),W(T.Z,{size:M.qE.XSmall,onClick:function(){return a(F.Us.CollectionsIntro)}}))},H=o(93309),B=o(62699),U=o.n(B),V=o(84221),X=o(364),Y=o(84187),_=s.createElement,J={type:"button",iconOnly:!0,buttonSize:M.qE.Small},$=function(e){var t=e.hasNext,o=e.hasPrevious,a=e.onNext,s=e.onPrevious;return _("div",{className:"flex items-center justify-end border-t border-border-subtlest-tertiary p-3"},_(Y.zx,(0,n.Z)({},J,{icon:_(X.e0,{className:"-rotate-90"}),variant:M.Wu.Tertiary,disabled:!o,onClick:s})),_(Y.zx,(0,n.Z)({},J,{icon:_(X.e0,{className:"rotate-90"}),variant:M.Wu.Tertiary,disabled:!t,onClick:a})))},G=o(62130),K=o(82731),ee=o(45405),te=o(78991),oe=o(42135),ne=o(91049),ae=o(84663),se=o(46624),ie=o(22925);function le(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function re(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?le(Object(o),!0).forEach((function(t){(0,f.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):le(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var ce=o(54480),ue=s.createElement,pe=function(e){var t=e.className,o=e.post,n=e.perPage,a=void 0===n?d.t:n,i=e.relationType,l=function(e){var t=e.postId,o=e.relationType,n=e.perPage,a=void 0===n?d.t:n,i=(0,ie.Y)().requestMethod,l=(0,oe.NL)(),r=(0,ne.N)((0,ae.e0)(ae.dt.RelatedPosts,null,{id:t,type:o}),function(){var e=(0,H.Z)(U().mark((function e(n){var s,l;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.pageParam,e.next=3,i(d.Pl,{id:t,relationType:o,first:a,after:s});case 3:return l=e.sent,e.abrupt("return",l.relatedPosts);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{enabled:!!t,getNextPageParam:function(e){var t,o;return(null==e||null===(t=e.pageInfo)||void 0===t?void 0:t.hasNextPage)&&(null==e||null===(o=e.pageInfo)||void 0===o?void 0:o.endCursor)},select:(0,s.useCallback)((function(e){if(e)return re(re({},e),{},{pages:e.pages.filter((function(e){return!(null==e||!e.edges.length)}))})}),[]),staleTime:ae.R.Default,initialData:function(){if(o===d.WQ.Collection){var e=l.getQueryData((0,se.NZ)(t));if(null!=e&&e.relatedCollectionPosts)return{pages:[e.relatedCollectionPosts],pageParams:[null]}}}});return{relatedPosts:r.data,isLoading:r.isLoading,hasNextPage:r.hasNextPage,fetchNextPage:r.fetchNextPage,isFetchingNextPage:r.isFetchingNextPage}}({postId:o.id,relationType:i,perPage:a}),r=l.relatedPosts,c=l.isLoading,u=l.isFetchingNextPage,p=l.hasNextPage,f=l.fetchNextPage,m=(0,s.useState)(0),v=m[0],P=m[1],b=null==r?void 0:r.pages[v],x=c||!(null==b||!b.edges.length),N=!(null==r||!r.pages[v+1]);return(0,s.useEffect)((function(){p&&!N&&f()}),[p,N,f]),x?ue("div",{className:g()(t,"flex flex-col",V.zl)},ue("div",{className:"flex cursor-pointer items-center justify-between rounded-16 rounded-t-16 px-4 py-1.5 laptop:cursor-auto laptop:py-4 laptop:!pb-0"},ue("p",{className:"font-bold text-text-quaternary typo-callout laptop:text-text-quaternary"},o.numCollectionSources," sources")),ue("div",{className:"flex flex-col pb-0 pt-2 laptop:min-h-[14rem]"},c&&ue("article",{"aria-busy":!0,className:"flex w-60 flex-col items-stretch px-4 py-2 laptop:w-full"},ue("div",{className:"mb-2 flex items-center"},ue(G.f,{className:"mr-2 h-6 w-6 rounded-full"}),ue(G.f,{className:"h-4 w-24"})),ue("div",{className:"mb-2 flex flex-1 flex-col items-center"},ue(G.f,{className:"my-1 h-4 w-full"}),ue(G.f,{className:"my-1 h-4 w-full"}))),!c&&(null==b?void 0:b.edges.map((function(e){var t=e.node;return ue("article",{key:t.id,className:"relative flex flex-col gap-2 px-4 py-2 hover:bg-surface-hover"},ue(te.YS,{className:"cursor-pointer",href:t.commentsPermalink,title:t.title}),ue("div",{className:"flex overflow-hidden"},ue(K.e,{source:t.source,size:ce.$C.Small}),ue(ee.Z,{description:t.source.name,createdAt:t.createdAt})),ue("p",{className:"line-clamp-2 text-text-link typo-callout"},t.title),!!t.summary&&ue("p",{className:"line-clamp-2 text-text-tertiary typo-footnote"},t.summary))})))),ue($,{hasNext:N,hasPrevious:v>0,onPrevious:function(){P((function(e){return e?e-1:0}))},onNext:(0,H.Z)(U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:if(!p||N){e.next=5;break}return e.next=5,f();case 5:P((function(e){return e+1}));case 6:case"end":return e.stop()}}),e)})))})):null},de=o(20617),fe=s.createElement,me=function(e){var t=e.onCopyPostLink,o=e.post,n=e.origin,a=e.className,s=e.onClose;return fe(j.ry,{className:a},fe(q,{post:o,onClose:s,className:"hidden pt-6 laptop:flex",contextMenuId:"post-widgets-context"}),fe(Q,{className:"hidden laptop:flex"}),fe(pe,{post:o,relationType:d.WQ.Collection}),fe(E.Z,{post:o}),fe(Z.I,{post:o,origin:n,onCopyPostLink:t,link:o.commentsPermalink}),fe(de.q,null))},ge=o(94846),ve=o(56378),Pe=o(14960),be=o(84153),xe=o(10338),Ne=o(25827),ye=o(73110),he=s.createElement;function Ce(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Oe(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(o),!0).forEach((function(t){(0,f.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Ce(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var we=function(e){var t,o,n=e.post,a=e.className,i=void 0===a?{}:a,l=e.shouldOnboardAuthor,r=e.origin,c=e.position,u=e.inlineActions,p=e.onPreviousPost,d=e.onNextPost,f=e.onClose,m=e.postPosition,v=e.isFallback,j=e.customNavigation,Z=e.onRemovePost,E=e.backToSquad,A=e.isBannerVisible,R=e.isPostPage,S=(0,Pe.Eu)().user,D=(0,x.sW)().subject,I=(0,y.Z)({origin:r,post:n}),L=n.updatedAt,q=n.contentHtml,T=n.image,z=I.onCopyPostLink,F=I.onReadArticle,M=!!p||!!d,W=g()("laptop:flex-row laptop:pb-0",null==i?void 0:i.container),H={postPosition:m,onPreviousPost:p,onNextPost:d,post:n,onReadArticle:F,onClose:f,inlineActions:u,onRemovePost:Z},B=(0,xe.E)(n);return(0,s.useEffect)((function(){null!=n&&n.id&&null!=S&&S.id&&B(n.id)}),[null==n?void 0:n.id,B,null==S?void 0:S.id]),he(N.Z,{hasNavigation:M,className:W,"aria-live":D===x._R.PostContent?"polite":"off",navigationProps:"fixed"===c?Oe(Oe({},H),{},{isBannerVisible:A,className:null==i?void 0:i.fixedNavigation}):null},he(ge.b,{className:g()("relative",null==i?void 0:i.content),"data-testid":"postContainer"},he(h.F,{className:Oe(Oe({},i),{},{onboarding:g()(null==i?void 0:i.onboarding,E&&"mb-6"),navigation:{actions:null==i||null===(t=i.navigation)||void 0===t?void 0:t.actions,container:g()("pt-6",null==i||null===(o=i.navigation)||void 0===o?void 0:o.container)}}),isPostPage:R,isFallback:v,customNavigation:j,shouldOnboardAuthor:l,navigationProps:H,engagementProps:I,origin:r,post:n},he("div",{className:g()("mb-6 flex flex-col gap-6",M||j?"mt-6":"mt-6 laptop:mt-0")},he(Q,{className:"laptop:hidden"}),he(P(),{href:"".concat(be.uJ,"sources/collections"),passHref:!0},he(ve.D,{tag:"a",label:"Collection",className:"bg-theme-overlay-float-cabbage text-brand-default"})),he("h1",{className:"break-words font-bold typo-large-title","data-testid":"post-modal-title"},n.title),he(ye.R,{tags:n.tags||[]}),!!L&&he("div",{className:"flex items-center text-text-tertiary typo-footnote"},he("span",null,"Last updated")," ",he(O.Z0,null),he(Ne.t,{date:L,type:w.lf.Post})),T&&he("div",{className:"block h-auto w-full overflow-hidden rounded-12"},he(b.w,{imgSrc:T,imgAlt:"Post cover image",ratio:"52%",eager:!0,fallbackSrc:C.n.post.imageCoverPlaceholder})),he(k.Z,{content:q})))),he(me,{onCopyPostLink:z,post:n,className:"pb-8",onClose:f,origin:r}))},ke=["id","className","onRequestClose","onPreviousPost","onNextPost","postPosition","post","onRemovePost"],je=s.createElement;function Ze(e){e.id,e.className;var t=e.onRequestClose,o=e.onPreviousPost,f=e.onNextPost,m=e.postPosition,g=e.post,v=e.onRemovePost,P=(0,a.Z)(e,ke),b=(0,s.useContext)(p.ZP).showArticleOnboarding,x=(0,c.Z)({isDisplayed:P.isOpen,offset:b?l.Dg:0}),N=x.position,y=x.onLoad;return je(u.Z,(0,n.Z)({},P,{onAfterOpen:y,onRequestClose:t,postType:d.hQ.Collection,source:g.source,loadingClassName:"!pb-2 laptop:pb-0"}),je(we,{position:N,post:g,postPosition:m,onPreviousPost:o,onNextPost:f,inlineActions:!0,className:{onboarding:"mt-8",navigation:{actions:"ml-auto laptop:hidden"},fixedNavigation:{container:i.Eu[i.u_.Size.XLarge],actions:"ml-auto"}},onClose:t,origin:r.aP.CollectionModal,onRemovePost:v}))}}}]);