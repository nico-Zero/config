"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9982],{7817:(e,r,t)=>{t.d(r,{U:()=>P});var n=t(51911),o=t(53767),a=t(44194),l=t(83849),i=t.n(l),s=t(47597),u=t(68983),c=t(16186),d=t(364),m=t(30386),p=t(84187),b=t(40701),f=t(81139),y=["inputId","name","value","valueChanged","placeholder","fieldSize","readOnly","fieldType","className","autoFocus","type","disabled","rightButtonProps","aria-describedby","onBlur","onFocus","showIcon"],v=a.createElement,h=function(e){return e.isPrimary?v(c.q,null):v(d.e0,{className:"rotate-90"})},P=(0,a.forwardRef)((function(e,r){var t=e.inputId,a=e.name,l=e.value,d=e.valueChanged,P=e.placeholder,g=void 0===P?"Search":P,k=e.fieldSize,x=void 0===k?"large":k,w=e.readOnly,M=e.fieldType,S=void 0===M?"primary":M,O=e.className,N=e.autoFocus,q=e.type,Z=e.disabled,T=e.rightButtonProps,C=void 0===T?{type:"button"}:T,j=e["aria-describedby"],z=e.onBlur,B=e.onFocus,D=e.showIcon,I=void 0===D||D,A=(0,o.Z)(e,y),E=(0,s.i)(l,d),U=E.inputRef,F=E.focused,R=E.hasInput,W=E.onFocus,_=E.onBlur,L=E.onInput,Q=E.focusInput,J=E.setInput,K=function(e){e.stopPropagation(),J(null)},X="primary"===S,H="secondary"===S,Y="medium"===x?"h-10 rounded-12":"h-12 rounded-14";return v(u.n,(0,n.Z)({},A,{className:i()("items-center !border !border-border-subtlest-tertiary !bg-background-default",Y,O,{focused:F}),onClick:Q,"data-testid":"searchField",ref:r}),!!I&&(H&&R?v(p.zx,{className:"mr-2",size:b.qE.XSmall,variant:b.Wu.Tertiary,title:"Clear query",onClick:K,icon:v(c.q,{className:"icon text-lg group-hover:text-text-primary"}),disabled:!R}):v(m.W,{secondary:F,className:"icon mr-2 text-2xl",style:{color:F||R?"var(--theme-text-primary)":"var(--field-placeholder-color)"}})),v(u._,{disabled:Z,placeholder:g,name:a,id:t,ref:U,onFocus:function(e){W(),null==B||B(e)},onBlur:function(e){_(),null==z||z(e)},onInput:L,autoFocus:N,type:q,"aria-describedby":j,autoComplete:"off",className:i()("flex-1",Y,(0,f.rI)({readOnly:w,disabled:Z,hasInput:R,focused:F})),required:!0}),(R&&X||H)&&!!C&&v(p.zx,(0,n.Z)({},C,{variant:H?b.Wu.Primary:b.Wu.Tertiary,size:C.size||b.qE.XSmall,title:C.title||"Clear query",onClick:"submit"!==C.type?K:C.onClick,icon:v(h,{isPrimary:X}),disabled:(null==C?void 0:C.disabled)||!R})))}))},14090:(e,r,t)=>{t.r(r),t.d(r,{SquadMemberModal:()=>ve,default:()=>he});var n,o,a=t(51911),l=t(70468),i=t(53767),s=t(44194),u=t(49110),c=t(63916),d=t(79918),m=t(8918),p=t(42054),b=t(98935),f=t(93309),y=t(28076),v=t(62699),h=t.n(v),P=t(14960),g=t(84153),k=t(99128),x=t(62576),w=t(7951),M=t(39762),S=t(37106),O=t(11331),N=t(17174),q=t(71626),Z=t(19811),T=t(97343),C=t(47831),j=t(30413),z=t(40701),B=t(32454),D=s.createElement;function I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function A(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?I(Object(t),!0).forEach((function(r){(0,y.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}!function(e){e.PromoteToAdmin="Make admin",e.PromoteToModerator="Promote to moderator",e.DemoteToModerator="Demote to moderator",e.DemoteToMember="Demote to member",e.BlockMember="Block member"}(o||(o={}));var E=(0,y.Z)({},o.BlockMember,"Yes, block member"),U=(n={},(0,y.Z)(n,o.PromoteToAdmin,(function(e,r){return"".concat(e," will get the same permissions as you have. Making someone an admin will not replace you as the admin of ").concat(r,". You can reverse this decision later.")})),(0,y.Z)(n,o.PromoteToModerator,(function(e){return"".concat(e," will now get moderator permissions and be able to remove posts and members from your Squad. You can reverse this decision later.")})),(0,y.Z)(n,o.DemoteToModerator,(function(e){return"".concat(e," will no longer have admin permissions. You can always reverse this decision later.")})),(0,y.Z)(n,o.DemoteToMember,(function(e){return"".concat(e," will lose the moderator permissions and become a regular member.")})),(0,y.Z)(n,o.BlockMember,(function(e,r){return"".concat(e," will be blocked and will no longer have access to ").concat(r,". They will not be able to rejoin unless you unblock them.")})),n),F=(0,y.Z)({},o.BlockMember,j.S.Ketchup),R=(0,y.Z)({},o.BlockMember,"Member has been blocked"),W=function(e,r){var t={label:o.PromoteToAdmin,icon:D(x.r,{size:k.Jh.Small}),action:r(c.Pt.Admin,o.PromoteToAdmin)},n={label:o.PromoteToModerator,icon:D(w.t,{size:k.Jh.Small}),action:r(c.Pt.Moderator,o.PromoteToModerator)},a={label:o.DemoteToModerator,icon:D(M.w,{size:k.Jh.Small}),action:r(c.Pt.Moderator,o.DemoteToModerator)},l={label:o.DemoteToMember,icon:D(S.Z,{size:k.Jh.Small}),action:r(c.Pt.Member,o.DemoteToMember)};return e.role===c.Pt.Admin?[a,l]:e.role===c.Pt.Moderator?[t,l]:[t,n]};function _(e){var r=e.squad,t=e.member,n=e.onUpdateRole,a=e.isOpen,l=(0,s.useContext)(P.ZP).user,i=(0,N.G)().showPrompt,u=(0,T.sW)().displayToast,d=function(){var e=(0,f.Z)(h().mark((function e(o,a){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i({title:"".concat(a,"?"),description:U[a](t.user.name,r.name),okButton:A({title:E[a]||a,variant:z.Wu.Primary},F[a]&&{color:F[a]}),content:D(q.z,{user:t.user,disableTooltip:!0,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,n({sourceId:r.id,memberId:t.user.id,role:o});case 7:R[a]&&u(R[a]);case 8:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),m=(0,s.useMemo)((function(){if(!t||!l)return[];var e=function(e,r){return function(){return d(e,r)}},n=[],a=(0,C.P4)(r,c.gm.MemberRoleUpdate);if(a){var i=W(t,e);n.push.apply(n,(0,b.Z)(i))}return n.push({label:"Report member",icon:D(O.U,{size:k.Jh.Small}),anchorProps:{href:"".concat(g.o2,"#user_id=").concat(l.id,"&reportee_id=").concat(null==t?void 0:t.user.id,"&squad_id=").concat(r.id),className:"flex items-center w-full",rel:"noopener noreferrer",target:"_blank"}}),(a||(0,C.P4)(r,c.gm.MemberRemove)&&t.role===c.Pt.Member)&&n.push({label:o.BlockMember,icon:D(M.w,{size:k.Jh.Small}),action:e(c.Pt.Blocked,o.BlockMember)}),n}),[t]);return D(Z.default,{options:m,isOpen:a,id:B.x.SquadMemberContext})}var L=t(16789),Q=t(68353),J=t(78740),K=t(45557),X=t(42135),H=t(78487),Y=t(91049),G=t(84663),V=t(66630),$=t(60681),ee=t(8421);function re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var te=function(e){var r=e.squad,t=e.query,n=e.membersQueryParams,o=void 0===n?{}:n,a=e.membersQueryEnabled,l=(0,s.useContext)($._).queryKey,i=(0,P.Eu)().user,u=(0,X.NL)(),c=(0,G.e0)(G.dt.SquadMembers,null,o,null==r?void 0:r.id,t),d=(0,H.D)(C.Tm,{onSuccess:function(){return u.invalidateQueries(c)}}).mutateAsync,m=(0,H.D)(C.iU,{onSuccess:function(){return u.invalidateQueries(c)}}).mutateAsync,p=(0,H.D)(C.WV,{onSuccess:function(){u.invalidateQueries(l),(0,V.S)(u,r,i,{collapsePinnedPosts:!0})}}).mutateAsync,b=(0,H.D)(C.hv,{onSuccess:function(){u.invalidateQueries(l),(0,V.S)(u,r,i,{collapsePinnedPosts:!1})}}).mutateAsync,f=(0,Y.N)(c,(function(e){var n=e.pageParam;return ee.Nb.request(C.q9,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?re(Object(t),!0).forEach((function(r){(0,y.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):re(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({id:null==r?void 0:r.id,after:"string"==typeof n?n:void 0,query:t},o))}),{enabled:!(null==r||!r.id)&&a,getNextPageParam:function(e){var r,t,n,o;return(null==e||null===(r=e.sourceMembers)||void 0===r||null===(t=r.pageInfo)||void 0===t?void 0:t.hasNextPage)&&(null==e||null===(n=e.sourceMembers)||void 0===n||null===(o=n.pageInfo)||void 0===o?void 0:o.endCursor)}});return(0,s.useMemo)((function(){var e,r;return{onUnblock:m,onUpdateRole:d,collapseSquadPinnedPosts:p,expandSquadPinnedPosts:b,membersQueryResult:f,members:null!==(e=null===(r=f.data)||void 0===r?void 0:r.pages.map((function(e){return e.sourceMembers.edges.map((function(e){return e.node}))})).flat())&&void 0!==e?e:[]}}),[m,d,p,b,f])},ne=t(84187),oe=t(12122),ae=t(63864),le=t(19072),ie=s.createElement;const se=function(e){var r=e.member,t=e.onUnblock,n=e.onOptionsClick,o=(0,N.G)().showPrompt,a=(0,T.sW)().displayToast,l=(0,P.Eu)().user,i=r.role,u=r.user,d=function(){var e=(0,f.Z)(h().mark((function e(r){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),n={title:"Unblock member?",description:"".concat(u.name," will now have access to join your Squad and can then post, upvote and comment"),okButton:{title:"Unblock",variant:z.Wu.Primary},content:ie(q.z,{disableTooltip:!0,user:u,className:{container:"justify-center px-6 py-3",textWrapper:"max-w-fit"}}),className:{buttons:"mt-6"}},e.next=4,o(n);case 4:if(!e.sent){e.next=7;break}t(r),a("Member is now unblocked");case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();if(i===c.Pt.Blocked)return ie(ae.i,{content:"Unblock"},ie(ne.zx,{className:"my-auto",variant:z.Wu.Tertiary,icon:ie(M.w,null),onClick:d}));var m=ie(ae.i,{content:"Member options"},ie(ne.zx,{size:z.qE.Small,variant:z.Wu.Tertiary,className:"m-auto mr-0",onClick:n,icon:ie(oe.O,null)})),p=l&&l.id===u.id,b=p||!l;return i!==c.Pt.Member?ie(s.Fragment,null,ie(le.Z,{className:p?"mr-10":"mr-2",role:r.role}),b?null:m):b?null:m};var ue=t(3376),ce=t(58022),de=s.createElement;function me(){return de("div",{className:"flex flex-1 flex-col items-center justify-center"},de(M.w,{secondary:!0,size:k.Jh.XXXLarge}),de("p",{className:"text-text-secondary typo-body"},"No blocked members found"))}var pe,be=["squad"],fe=s.createElement;!function(e){e.AllMembers="Squad members",e.BlockedMembers="Blocked members"}(pe||(pe={}));var ye=function(e){var r=e.squad,t=(0,J.J)({squad:r,origin:L.aP.SquadMembersList}),n=t.copying,o=t.logAndCopyLink;return(0,C.P4)(r,c.gm.Invite)?fe("button",{type:"button",disabled:n,className:"flex items-center justify-start px-6 py-3 hover:bg-surface-hover",onClick:function(){o()}},fe(K.bA,{className:"mr-4 h-12 w-12 rounded-10 bg-surface-float"},fe(Q.x,{size:k.Jh.Large,className:"text-raw-salt-90"})),fe("p",{className:"text-raw-salt-90 typo-callout"},"Copy invitation link")):null};function ve(e){var r,t,n=e.squad,o=(0,i.Z)(e,be),b=(0,s.useState)(null),f=b[0],y=b[1],v=(0,s.useState)(null),h=v[0],P=v[1],g=(0,p.Z)({id:B.x.SquadMemberContext}),k=g.onMenuClick,x=g.onHide,w=g.isOpen,M=(0,s.useState)(""),S=M[0],O=M[1],N=(0,ue.Z)((function(e){return O(e)}),ce.Th),q=(0,l.Z)(N,1)[0],Z=te({squad:n,query:null!=S&&null!==(r=S.trim)&&void 0!==r&&null!==(t=r.call(S))&&void 0!==t&&t.length?S:void 0,membersQueryParams:{role:f},membersQueryEnabled:!0}),T=Z.members,j=Z.membersQueryResult,z=Z.onUnblock,D=Z.onUpdateRole;return fe(s.Fragment,null,fe(d.Z,(0,a.Z)({},o,{kind:u.u_.Kind.FixedCenter,title:"Squad members",tabs:Object.values(pe),header:(0,C.P4)(n,c.gm.ViewBlockedMembers)?fe(u.u_.Header.Tabs,{onTabClick:function(e){return y(e===pe.BlockedMembers?c.Pt.Blocked:null)}}):null,scrollingProps:{isFetchingNextPage:j.isFetchingNextPage,canFetchMore:(0,m.H)(j),fetchNextPage:j.fetchNextPage,onScroll:x},userListProps:{additionalContent:function(e,r){return fe(se,{member:T[r],onUnblock:function(){return z({sourceId:n.id,memberId:e.id})},onOptionsClick:function(e){e.preventDefault(),function(e,r){P(r),k(e)}(e,T[r])}})},emptyPlaceholder:S?fe(K.bA,{className:"p-10 text-text-tertiary typo-callout"},"No user found"):fe(me,null),isLoading:j.isLoading,initialItem:f===c.Pt.Blocked||null!=S&&S.length?void 0:fe(ye,{squad:n})},users:null==T?void 0:T.map((function(e){return e.user})),onSearch:q})),fe(_,{squad:n,member:h,onUpdateRole:D,isOpen:w}))}const he=ve},79918:(e,r,t)=>{t.d(r,{Z:()=>m});var n=t(51911),o=t(53767),a=t(44194),l=t(49110),i=t(93994),s=t(7817),u=["users","title","header","scrollingProps","placeholderAmount","size","userListProps","onSearch"],c=["onScroll"],d=a.createElement;const m=function(e){var r=e.users,t=e.title,m=e.header,p=e.scrollingProps,b=e.placeholderAmount,f=e.size,y=void 0===f?l.u_.Size.Medium:f,v=e.userListProps,h=e.onSearch,P=(0,o.Z)(e,u),g=(0,a.useRef)(),k=(0,a.useState)(),x=k[0],w=k[1],M=p.onScroll,S=(0,o.Z)(p,c);return d(l.u_,(0,n.Z)({contentRef:function(e){return w(e)},kind:l.u_.Kind.FlexibleCenter,size:y},P),null!=m?m:d(l.u_.Header,{title:t}),d(l.u_.Body,{className:"!p-0",onScroll:M,ref:g},h&&d(s.U,{className:"mx-6 my-4",inputId:"members-search",valueChanged:h}),d(i.Z,(0,n.Z)({},v,{users:r,scrollingProps:S,placeholderAmount:b,userInfoProps:{scrollingContainer:g.current,appendTooltipTo:x}}))))}},93994:(e,r,t)=>{t.d(r,{Z:()=>d});var n=t(51911),o=t(44194),a=t(52402),l=t.n(a),i=t(27643),s=t(71626),u=t(8918),c=o.createElement;const d=function(e){var r=e.placeholderAmount,t=e.scrollingProps,o=e.users,a=e.additionalContent,d=e.initialItem,m=e.isLoading,p=e.emptyPlaceholder,b=e.userInfoProps,f=void 0===b?{}:b,y=c(i.K,{placeholderAmount:r});return null!=o&&o.length?c(u.Z,(0,n.Z)({},t,{"aria-label":"users-list",placeholder:y}),!!d&&d,o.map((function(e,r){return c(l(),{key:e.username,href:e.permalink},c(s.z,(0,n.Z)({},f,{tag:"a",href:e.permalink,user:e}),null==a?void 0:a(e,r)))}))):m?y:null!=p?p:y}},27643:(e,r,t)=>{t.d(r,{K:()=>s});var n=t(44194),o=t(62130),a=n.createElement,l=5,i=function(){return a("div",{className:"flex flex-row px-6 py-3"},a(o.f,{className:"size-12 rounded-14"}),a("div",{className:"ml-4 flex max-w-full flex-1 flex-col"},a(o.f,{className:"mb-2 h-5 w-1/3 rounded-14"}),a(o.f,{className:"h-5 w-1/2 rounded-14"})))};function s(e){var r=e.placeholderAmount;return a("div",{className:"flex flex-col"},Array(r<=l?r:l).fill(0).map((function(e,r){return a(i,{key:r})})))}}}]);