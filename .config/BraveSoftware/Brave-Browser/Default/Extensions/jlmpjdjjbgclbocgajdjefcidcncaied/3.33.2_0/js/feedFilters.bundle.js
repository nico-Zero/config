"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[2453],{71444:(e,t,n)=>{n.d(t,{X:()=>g});var o=n(51911),a=n(53767),l=n(44194),r=n(83849),i=n.n(r),s=n(74077),c=n(39638),u=["name","checked","children","className","checkmarkClassName","onToggle","id","disabled"],d=l.createElement,g=(0,l.forwardRef)((function(e,t){var n=e.name,r=e.checked,g=e.children,f=e.className,m=e.checkmarkClassName,p=e.onToggle,b=e.id,y=e.disabled,v=(0,a.Z)(e,u),h=(0,l.useState)(r),k=h[0],x=h[1];(0,l.useEffect)((function(){x(r)}),[r]);return d("label",{className:i()("relative z-1 inline-flex select-none items-center p-1 pr-3 text-text-tertiary typo-footnote",!y&&"cursor-pointer",c.Z.label,f,{checked:k,disabled:y}),style:{transition:"color 0.1s linear"},htmlFor:b},d("input",(0,o.Z)({},v,{disabled:y,id:b,type:"checkbox",className:"absolute h-0 w-0 opacity-0",name:n,checked:r,onChange:function(e){x(e.target.checked),null==p||p(e.target.checked)},ref:t})),d("div",{className:i()("relative z-1 mr-3 flex h-5 w-5 items-center justify-center rounded-6 border-2 border-border-subtlest-primary",c.Z.checkmark,m)},d(s.t,{className:"icon h-full w-full text-text-primary opacity-0",style:{transition:"opacity 0.1s linear"}})),g)}))},7817:(e,t,n)=>{n.d(t,{U:()=>h});var o=n(51911),a=n(53767),l=n(44194),r=n(83849),i=n.n(r),s=n(47597),c=n(68983),u=n(16186),d=n(364),g=n(30386),f=n(84187),m=n(40701),p=n(81139),b=["inputId","name","value","valueChanged","placeholder","fieldSize","readOnly","fieldType","className","autoFocus","type","disabled","rightButtonProps","aria-describedby","onBlur","onFocus","showIcon"],y=l.createElement,v=function(e){return e.isPrimary?y(u.q,null):y(d.e0,{className:"rotate-90"})},h=(0,l.forwardRef)((function(e,t){var n=e.inputId,l=e.name,r=e.value,d=e.valueChanged,h=e.placeholder,k=void 0===h?"Search":h,x=e.fieldSize,T=void 0===x?"large":x,w=e.readOnly,N=e.fieldType,C=void 0===N?"primary":N,S=e.className,Z=e.autoFocus,F=e.type,U=e.disabled,O=e.rightButtonProps,P=void 0===O?{type:"button"}:O,E=e["aria-describedby"],B=e.onBlur,I=e.onFocus,z=e.showIcon,q=void 0===z||z,_=(0,a.Z)(e,b),L=(0,s.i)(r,d),j=L.inputRef,M=L.focused,D=L.hasInput,W=L.onFocus,R=L.onBlur,A=L.onInput,H=L.focusInput,X=L.setInput,G=function(e){e.stopPropagation(),X(null)},J="primary"===C,V="secondary"===C,K="medium"===T?"h-10 rounded-12":"h-12 rounded-14";return y(c.n,(0,o.Z)({},_,{className:i()("items-center !border !border-border-subtlest-tertiary !bg-background-default",K,S,{focused:M}),onClick:H,"data-testid":"searchField",ref:t}),!!q&&(V&&D?y(f.zx,{className:"mr-2",size:m.qE.XSmall,variant:m.Wu.Tertiary,title:"Clear query",onClick:G,icon:y(u.q,{className:"icon text-lg group-hover:text-text-primary"}),disabled:!D}):y(g.W,{secondary:M,className:"icon mr-2 text-2xl",style:{color:M||D?"var(--theme-text-primary)":"var(--field-placeholder-color)"}})),y(c._,{disabled:U,placeholder:k,name:l,id:n,ref:j,onFocus:function(e){W(),null==I||I(e)},onBlur:function(e){R(),null==B||B(e)},onInput:A,autoFocus:Z,type:F,"aria-describedby":E,autoComplete:"off",className:i()("flex-1",K,(0,p.rI)({readOnly:w,disabled:U,hasInput:D,focused:M})),required:!0}),(D&&J||V)&&!!P&&y(f.zx,(0,o.Z)({},P,{variant:V?m.Wu.Primary:m.Wu.Tertiary,size:P.size||m.qE.XSmall,title:P.title||"Clear query",onClick:"submit"!==P.type?G:P.onClick,icon:y(v,{isPrimary:J}),disabled:(null==P?void 0:P.disabled)||!D})))}))},89938:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ke});var o=n(51911),a=n(98935),l=n(28076),r=n(93309),i=n(62699),s=n.n(i),c=n(44194),u=n(31624),d=n(53879),g=n(26051),f=n(34925),m=n(39762),p=n(70468),b=n(83849),y=n.n(b),v=n(7817),h=n(364),k=n(84187),x=n(40701),T=c.createElement,w=function(e){var t=e.matches,n=e.action;return T(k.zx,{onClick:n,className:"px-4",variant:x.Wu.Secondary,size:x.qE.Small},"Clear (",t,")")},N=function(e){var t=e.action;return T(k.zx,{onClick:t,className:"px-4",variant:x.Wu.Primary,size:x.qE.Small},"Follow all")};function C(e){var t=e.category,n=e.followedTags,o=e.onFollowTags,a=e.onUnfollowTags,l=null==t?void 0:t.tags.filter((function(e){return-1!==n.indexOf(e)}));return l.length>0?T(w,{matches:l.length,action:function(){return a({tags:l,category:t.id})}}):T(N,{action:function(){return o({tags:t.tags,category:t.id})}})}var S,Z=n(84591),F=n(58519),U=(0,F.Z)("details","right-icon cursor-pointer"),O=(0,F.Z)(U,"border-t border-b border-border-subtlest-tertiary"),P=(0,F.Z)("summary","flex justify-between items-center outline-none"),E=(0,F.Z)(P,"p-6 pl-4"),B=(0,F.Z)("div","flex flex-wrap px-6 pb-6 pt-2"),I=(0,F.Z)("ul","flex flex-col p-0"),z=(0,F.Z)("ul","grid grid-cols-1 gap-4"),q=(0,F.Z)("li","flex items-center p-0"),_=c.createElement;!function(e){e.Default="default",e.Settings="settings"}(S||(S={}));var L={settings:[U,P],default:[O,E]};function j(e){var t=e.layout,n=void 0===t?S.Default:t,o=e.tagCategory,a=e.followedTags,l=e.blockedTags,r=e.onFollowTags,i=e.onUnfollowTags,s=e.onUnblockTags,c=n===S.Settings,u=(0,p.Z)(L[n],2),d=u[0],g=u[1],f=o.tags.some((function(e){return a.includes(e)}));return _(d,null,_(g,{className:y()(c&&"rounded-14 bg-border-subtlest-tertiary px-4 py-5",c&&f&&"border-l-4 border-accent-cabbage-default")},_("div",{className:"flex items-center"},_(h.e0,{className:"icon mr-2 rotate-90 text-xl text-text-tertiary transition-transform"})," ",_("span",{className:"mr-3 typo-title1"},o.emoji)," ",_("h4",{className:"font-bold typo-callout"},o.title)," "),_(C,{followedTags:a,category:o,onFollowTags:r,onUnfollowTags:i})),_(B,{"data-testid":"tagCategoryTags"},o.tags.map((function(e){return _(Z.Z,{className:"mb-3 mr-3",tagItem:e,followedTags:a,blockedTags:l,onFollowTags:r,onUnfollowTags:i,onUnblockTags:s,key:e})}))))}var M=n(38994),D=n(63864),W=c.createElement;function R(e){var t=e.tooltip,n=e.tag,o=e.rowIcon,a=e.followedTags,l=e.blockedTags,r=e.onFollowTags,i=e.onUnfollowTags,s=e.onUnblockTags,c=e.onClick;return W(q,{className:"relative my-2 pl-6"},W(Z.Z,{className:r?"":"cursor-default",size:x.qE.Small,followedTags:a,blockedTags:l,tagItem:n,onFollowTags:r,onUnfollowTags:i,onUnblockTags:s}),W(D.i,{placement:"left",content:t},W(k.zx,{className:"absolute right-4 my-auto",variant:x.Wu.Tertiary,onClick:function(e){return null==c?void 0:c(e,n)},icon:o})))}var A=c.createElement,H={settings:z,default:I};function X(e){var t=e.tagCategoryLayout,n=void 0===t?S.Default:t,o=e.tags,a=e.rowIcon,l=e.tooltip,r=e.emptyText,i=e.followedTags,s=e.blockedTags,c=e.onFollowTags,u=e.onUnfollowTags,d=e.onUnblockTags,g=e.options,f=H[n];return A(f,{className:null!=o&&o.length?"mt-3":"mt-0"},!(null!=o&&o.length)&&A("p",{className:"mx-6 text-text-tertiary typo-callout"},r),null==o?void 0:o.map((function(e){return A(R,{tag:e.name?e.name:e,rowIcon:a,followedTags:i,blockedTags:s,onFollowTags:c,onUnfollowTags:u,onUnblockTags:d,key:String(e.name?e.name:e),tooltip:l,onClick:g})})))}var G=n(77005),J=n.n(G),V=n(78838),K=n(42054),Y=n(32454),Q=c.createElement,$=J()((function(){return Promise.resolve().then(n.bind(n,19811))}),{ssr:!1,loadableGenerated:{webpack:function(){return[19811]}}});function ee(e){var t=e.onHidden,n=e.tag,o=e.onBlock,a=e.onUnblock,l=e.onFollow,r=e.onUnfollow,i=(0,K.Z)({id:Y.x.TagOptionsContext}).isOpen,s=(0,c.useMemo)((function(){var e,t=[];n&&t.push({label:"View",anchorProps:{href:(0,V.uZ)(null!==(e=n.name)&&void 0!==e?e:n)}});return l&&t.push({label:"Follow",action:l}),r&&t.push({label:"Unfollow",action:r}),o&&t.push({label:"Block",action:o}),a&&t.push({label:"Unblock",action:a}),t}),[n,l,r,o,a]);return Q($,{disableBoundariesCheck:!0,id:Y.x.TagOptionsContext,className:"menu-primary",animation:"fade",onHidden:t,style:{width:"7rem"},isOpen:i,options:s})}var te=n(73199),ne=n(12122),oe=n(14960),ae=n(16789),le=n(3376),re=n(86422),ie=n(75993),se=n(52881),ce=n(57336),ue=n(8421),de=function(e){var t=e.value,n=e.origin,o=(0,c.useContext)(ce.ZP).logEvent,a=(0,re.a)((0,se.Y)(t),(0,r.Z)(s().mark((function e(){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.Nb.request(ie.Lz,{query:t});case 2:return(a=e.sent).searchTags.query&&o({event_name:ae.gr.SearchTags,extra:JSON.stringify({tag_search_term:a.searchTags.query,tag_return_value:a.searchTags.tags.length,origin:n})}),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),{enabled:(null==t?void 0:t.length)>=2});return{data:a.data,isLoading:a.isLoading}},ge=c.createElement,fe={settings:(0,F.Z)("div","grid grid-cols-1 gap-4"),default:c.Fragment};function me(e){var t,n=e.onUnblockItem,o=e.tagCategoryLayout,a=void 0===o?S.Default:o,l=(0,c.useRef)(null),r=(0,c.useState)(null),i=r[0],s=r[1],u=(0,c.useContext)(oe.ZP).user,d=(0,le.Z)(s,200),g=(0,p.Z)(d,1)[0],f=(0,M.ZP)(),m=f.tagsCategories,b=f.feedSettings,h=f.isLoading,k=function(){var e=(0,c.useState)(),t=e[0],n=e[1],o=(0,K.Z)({id:Y.x.TagOptionsContext}).onMenuClick;return{contextSelectedTag:t,setContextSelectedTag:n,onTagContextOptions:function(e,t){n(t),o(e)}}}(),x=k.contextSelectedTag,T=k.setContextSelectedTag,w=k.onTagContextOptions,N=(0,te.Z)({origin:null!=i&&i.length?ae.aP.TagsSearch:ae.aP.TagsFilter}),C=N.onFollowTags,Z=N.onUnfollowTags,F=N.onBlockTags,U=N.onUnblockTags,O=null==b||null===(t=b.blockedTags)||void 0===t?void 0:t.some((function(e){return e===x})),P=de({value:i,origin:ae.aP.ManageTag}).data,E=(0,c.useMemo)((function(){var e,t;return{followedTags:null!==(e=null==b?void 0:b.includeTags)&&void 0!==e?e:[],blockedTags:null!==(t=null==b?void 0:b.blockedTags)&&void 0!==t?t:[]}}),[b]),B=E.followedTags,I=E.blockedTags,z=function(e){var t=(0,p.Z)(e.tags,1)[0];return u?n({tag:t,action:function(){return U({tags:[t]})}}):U({tags:[t]})},q=a===S.Default,_=fe[a];return ge("div",{className:y()("flex flex-col",q&&"pb-6"),"aria-busy":h,"data-testid":"tagsFilter"},ge("div",{className:"flex flex-col px-6 pb-6"},ge(v.U,{inputId:"search-filters",placeholder:"Search",className:"mb-6",ref:l,valueChanged:g}),ge("h3",{className:"mb-3 font-bold typo-body"},"Choose tags to follow"),ge("p",{className:"mb-2 text-text-tertiary typo-callout"},"Letâ€™s super-charge your feed with relevant content! Start by choosing tags you want to follow, and we will curate your feed accordingly.")),(null==i?void 0:i.length)>0&&ge(c.Fragment,null,ge(X,{tags:null==P?void 0:P.searchTags.tags,emptyText:"No matching tags.",tooltip:"Options",options:w,followedTags:B,blockedTags:I,onFollowTags:C,onUnfollowTags:Z,onUnblockTags:z,rowIcon:ge(ne.O,null)}),ge(ee,{tag:x,onBlock:!O&&function(){return F({tags:[x]})},onUnblock:O&&function(){return U({tags:[x]})},onHidden:function(){return T(null)}})),ge(_,null,(!i||i.length<=0)&&(null==m?void 0:m.map((function(e){return ge(j,{layout:a,key:e.id,tagCategory:e,followedTags:B,blockedTags:I,onFollowTags:C,onUnfollowTags:Z,onUnblockTags:z})})))))}var pe=n(53767),be=n(9392),ye=["label","description"],ve=c.createElement;function he(e){var t=e.label,n=e.description,a=(0,pe.Z)(e,ye);return ve("div",{className:"my-4 flex flex-col"},ve(be.r,(0,o.Z)({className:"h-8",defaultTypo:!1,labelClassName:"typo-callout"},a),t),ve("p",{className:"mt-3 text-text-tertiary typo-callout"},n))}var ke=n(50616),xe=c.createElement,Te="advancedSettings";const we=function(){var e=(0,M.ZP)(),t=e.advancedSettings,n=e.isLoading,o=e.feedSettings,a=(0,ke.k)(),l=a.selectedSettings,r=a.onToggleSettings,i=(0,c.useMemo)((function(){var e;return null!==(e=null==t?void 0:t.filter((function(e){return e.group===ie.qG.ContentSource})))&&void 0!==e?e:[]}),[t]),s=(0,c.useMemo)((function(){var e;return null!==(e=null==t?void 0:t.filter((function(e){return e.group===ie.qG.ContentCuration})))&&void 0!==e?e:[]}),[t]),u=(0,c.useCallback)((function(e){var t;return(null!==(t=null==o?void 0:o.excludeSources)&&void 0!==t?t:[]).some((function(t){return t.id===e.id}))}),[null==o?void 0:o.excludeSources]),d=(0,te.Z)({origin:ae.aP.SourcePage}),g=d.onFollowSource,f=d.onUnfollowSource,m=(0,c.useCallback)((function(e){u(e)?g({source:e}):f({source:e})}),[u,g,f]);return xe("section",{className:"flex flex-col px-6","aria-busy":n},null==i?void 0:i.map((function(e){var t=e.id,n=e.title,o=e.description,a=e.options;return xe(he,{key:t,label:n,name:"".concat(Te,"-").concat(t),inputId:"".concat(Te,"-").concat(t),checked:!u(a.source),description:o,onToggle:function(){return m(a.source)}})})),null==s?void 0:s.map((function(e){var t,n=e.id,o=e.title,a=e.description,i=e.defaultEnabledState;return xe(he,{key:n,label:o,name:"".concat(Te,"-").concat(n),inputId:"".concat(Te,"-").concat(n),checked:null!==(t=l[n])&&void 0!==t?t:i,description:a,onToggle:function(){return r(n,i)}})})))};var Ne=n(30197),Ce=c.createElement;function Se(e){var t=e.source,n=e.onSourceClick,o=e.blocked;return Ce(q,{className:"relative"},Ce("a",{className:"flex h-12 flex-1 cursor-default items-center rounded-6 py-2 pl-6 pr-14"},Ce(Ne.w,{imgSrc:t.image,imgAlt:"".concat(t.name," logo"),className:"h-8 w-8 rounded-6"}),Ce("span",{className:"ml-3 flex-1 truncate text-left text-text-tertiary typo-callout"},t.name)),Ce(D.i,{placement:"left",content:o?"Unblock source":"Block source"},Ce(k.zx,{className:"absolute right-4 my-auto",variant:x.Wu.Tertiary,onClick:function(){return null==n?void 0:n(t)},icon:Ce(m.w,null)})))}var Ze=c.createElement;function Fe(e){var t=e.excludeSources,n=e.onSourceClick;return Ze(I,{className:null!=t&&t.length?"mt-3":"mt-0"},!(null!=t&&t.length)&&Ze("p",{className:"mx-6 text-text-tertiary typo-callout"},"No blocked sources."),null==t?void 0:t.map((function(e){return Ze(Se,{key:e.id,source:e,blocked:!0,onSourceClick:n})})))}var Ue=c.createElement;function Oe(e){var t=e.onUnblockItem,n=(0,M.ZP)(),o=n.feedSettings,a=n.isLoading,l=(0,te.Z)({origin:ae.aP.BlockedFilter}),r=l.onUnblockTags,i=l.onFollowSource;return Ue("div",{className:"flex flex-col","aria-busy":a},Ue("p",{className:"mx-6 mb-6 text-text-tertiary typo-callout"},"Block tags and sources directly from the feed. Whenever you see a post with a tag/source you wish to block, click on the more options button (â‹®) and choose â€œNot interested inâ€¦â€œ."),Ue("h3",{className:"mx-6 my-3 font-bold typo-body"},"Blocked tags"),Ue(X,{tags:null==o?void 0:o.blockedTags,options:function(e,n){t({tag:n,action:function(){return r({tags:[n]})}})},tooltip:"Unblock tag",emptyText:"No blocked tags.",rowIcon:Ue(m.w,null)}),Ue("h3",{className:"mx-6 mb-3 mt-10 font-bold typo-body"},"Blocked sources"),Ue(Fe,{excludeSources:null==o?void 0:o.excludeSources,onSourceClick:function(e){t({source:e,action:function(){return i({source:e})}})}}))}var Pe=n(49110),Ee=n(17174),Be=c.createElement,Ie=function(e){var t=e.name,n="string"==typeof t?t:t.name,o="#".concat(n);return Be("p",null,"Unblocking ",Be("strong",{className:"text-text-primary"},o)," means that you might see posts containing this tag in your feed.")},ze=function(e){var t=e.name,n="string"==typeof t?t:t.name;return Be("p",null,"Unblocking ",Be("strong",{className:"text-text-primary"},n)," means that you might see posts from this source in your feed.")},qe=n(71444),_e=["description","children"],Le=c.createElement;function je(e){var t=e.description,n=e.children,a=(0,pe.Z)(e,_e);return Le(qe.X,(0,o.Z)({},a,{className:"!items-start !typo-callout"}),Le("div",{className:"flex flex-col"},Le("span",{className:"mb-2"},n),Le("span",{className:"font-normal text-text-secondary"},t)))}var Me=c.createElement;function De(){var e,t=(0,M.ZP)(),n=t.advancedSettings,o=t.isLoading,a=(0,ke.k)(),l=a.selectedSettings,r=a.onToggleSettings,i=null==n?void 0:n.find((function(e){return"Videos"===e.title}));return Me("section",{className:"flex flex-col gap-6 px-6","aria-busy":o},i&&Me(je,{name:i.title,description:i.description,checked:null!==(e=l[i.id])&&void 0!==e?e:i.defaultEnabledState,onToggle:function(){return r(i.id,i.defaultEnabledState)}},i.title),Me(je,{name:"Articles",description:"Show article posts on my feed",disabled:!0,checked:!0},"Articles"))}var We,Re=n(84153),Ae=n(62916),He=n(74803),Xe=c.createElement;function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.MyFeed="My feed",e.Tags="Manage tags",e.ManageCategories="Manage categories",e.ContentTypes="Content types",e.Blocked="Blocked items"}(We||(We={}));var Ve={title:"Are you sure?",okButton:{title:"Yes, unblock"}};function Ke(e){var t,n=(0,Ee.G)().showPrompt,l=function(){var e=(0,r.Z)(s().mark((function e(t){var o,a,l,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.action,a=t.source,l=t.tag,r=l?Xe(Ie,{name:l}):Xe(ze,{name:a.name}),e.next=4,n(Je(Je({},Ve),{},{description:r}));case 4:if(!e.sent){e.next=6;break}null==o||o();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=(0,Ae.V)(Ae.d.MobileL),c=(0,He.z)().feeds,p=We.MyFeed,b=[{title:p,options:{icon:Xe(u.t,null),group:"Feeds"}}].concat((0,a.Z)(i?null==c||null===(t=c.edges)||void 0===t?void 0:t.map((function(t){var n,o=t.node;return{title:(null===(n=o.flags)||void 0===n?void 0:n.name)||"Feed ".concat(o.id),options:{icon:Xe(d.j,null),href:"".concat(Re.uJ,"feeds/").concat(o.id,"/edit"),onClick:function(t){var n=e.onRequestClose;n&&n(t)},group:"Feeds"}}})):[]),[{title:We.ManageCategories,options:{icon:Xe(g.k,null),group:"Preference"}},{title:We.ContentTypes,options:{icon:Xe(f.y,null),group:"Preference"}},{title:We.Blocked,options:{icon:Xe(m.w,null),group:"Preference"}}]).map((function(e){return i?e:Je(Je({},e),{},{options:Je(Je({},e.options),{},{group:void 0})})}));return Xe(Pe.u_,(0,o.Z)({},e,{className:"h-full flex-1 overflow-auto",kind:Pe.u_.Kind.FixedCenter,size:Pe.u_.Size.XLarge,tabs:b}),Xe(Pe.u_.Sidebar,null,Xe(Pe.u_.Sidebar.List,{className:"w-74",title:"Feed settings",defaultOpen:!0}),Xe(Pe.u_.Sidebar.Inner,null,Xe(Pe.u_.Header,null),Xe(Pe.u_.Body,{view:p},Xe(me,{tagCategoryLayout:S.Settings})),Xe(Pe.u_.Body,{view:We.ManageCategories},Xe(we,null)),Xe(Pe.u_.Body,{view:We.ContentTypes},Xe(De,null)),Xe(Pe.u_.Body,{view:We.Blocked},Xe(Oe,{onUnblockItem:l})))))}},39638:(e,t,n)=>{n.d(t,{Z:()=>o});const o={checkmark:"Ur6sCRLeLJ0xiAl0Ry8kcA==",label:"_0ta8J6BOiKQx6kRDDsqEHg=="}}}]);